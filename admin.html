<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - Maillots & Blousons S√©n√©gal</title>
    <style>
        /* Variables CSS */
        :root {
            --primary-color: #00853f;
            --secondary-color: #ffffff;
            --accent-color: #fd0d1b;
            --text-color: #333333;
            --light-gray: #f5f5f5;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--secondary-color);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        button {
            cursor: pointer;
            border: none;
            outline: none;
            font-family: inherit;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: var(--secondary-color);
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
            text-align: center;
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #006b32;
        }

        .btn-secondary {
            background-color: var(--accent-color);
        }

        .btn-secondary:hover {
            background-color: #d10b17;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.9rem;
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        .btn-warning {
            background-color: #ffc107;
            color: #000;
        }

        .btn-warning:hover {
            background-color: #e0a800;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
        }

        .btn-success:hover {
            background-color: #218838;
        }

        /* Header */
        header {
            background-color: var(--primary-color);
            color: var(--secondary-color);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--box-shadow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .logo span {
            color: var(--accent-color);
        }

        .logo img {
            height: 40px;
            margin-right: 10px;
        }

        .admin-nav {
            display: flex;
            gap: 20px;
        }

        .admin-nav a {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .admin-nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .admin-nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .logout-btn {
            background-color: var(--accent-color);
            padding: 8px 16px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .logout-btn:hover {
            background-color: #d10b17;
        }

        /* Page Admin */
        .admin-page {
            padding: 40px 0;
            min-height: calc(100vh - 150px);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }

        .admin-title {
            color: var(--primary-color);
            font-size: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: var(--light-gray);
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--box-shadow);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 1rem;
        }

        .admin-section {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Formulaire produit */
        .product-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 133, 63, 0.1);
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 5px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: normal;
            cursor: pointer;
        }

        /* Table produits */
        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .products-table th {
            background-color: var(--light-gray);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 2px solid #ddd;
        }

        .products-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .products-table tr:hover {
            background-color: rgba(0, 133, 63, 0.05);
        }

        .product-image-small {
            width: 60px;
            height: 60px;
            border-radius: var(--border-radius);
            object-fit: cover;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        /* Table commandes */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .orders-table th {
            background-color: var(--light-gray);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 2px solid #ddd;
        }

        .orders-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .orders-table tr:hover {
            background-color: rgba(0, 133, 63, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
        }

        .status-shipped {
            background-color: #cce5ff;
            color: #004085;
        }

        .status-delivered {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--secondary-color);
            padding: 40px;
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        /* Tabs */
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--primary-color);
            color: var(--secondary-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.success {
            background-color: #28a745;
        }

        .notification.error {
            background-color: #dc3545;
        }

        .notification.warning {
            background-color: #ffc107;
            color: #000;
        }

        .notification-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 1.2rem;
            cursor: pointer;
        }

        /* Search */
        .search-box {
            margin-bottom: 20px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .admin-nav {
                gap: 10px;
            }
            
            .products-table,
            .orders-table {
                display: block;
                overflow-x: auto;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .admin-nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .product-form {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
            }
        }

        @media (max-width: 576px) {
            .admin-section {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .product-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- V√©rification login -->
    <script>
        // V√©rifier si l'utilisateur est connect√©
        const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
        
        if (!isLoggedIn) {
            window.location.href = 'admin-login.html';
        }
    </script>

    <!-- Notification -->
    <div id="notification" class="notification" style="display: none;">
        <span id="notificationText"></span>
        <button class="notification-close" onclick="hideNotification()">&times;</button>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2czI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6TTM5OC45IDI1NmMwIDc4LjktNjQuMSAxNDMtMTQzIDE0M3MtMTQzLTY0LjEtMTQzLTE0M3M2NC4xLTE0MyAxNDMtMTQzczE0MyA2NC4xIDE0MyAxNDN6Ii8+PHBhdGggZmlsbD0iI2ZkMGQxYiIgZD0iTTM5OC45IDI1NmMwIDc4LjktNjQuMSAxNDMtMTQzIDE0M3MtMTQzLTY0LjEtMTQzLTE0M3M2NC4xLTE0MyAxNDMtMTQzczE0MyA2NC4xIDE0MyAxNDN6Ii8+PHBhdGggZmlsbD0iIzAwODUzZiIgZD0iTTI1NS45IDM2OGMtNjEuOSAwLTExMi01MC4xLTExMi0xMTJzNTAuMS0xMTIgMTEyLTExMnMxMTIgNTAuMSAxMTIgMTEycy01MC4xIDExMi0xMTIgMTEyeiIvPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0yODcuOSAyMjRoLTI0di00OGgtMjR2NDhoLTI0djcyaDI0djQ4aDI0di00OGgyNHYtNzJ6Ii8+PC9zdmc+" alt="Drapeau S√©n√©gal">
                <span>Admin</span>
            </a>
            
            <nav class="admin-nav">
                <a href="#products" class="tab-link active" data-tab="products">Produits</a>
                <a href="#orders" class="tab-link" data-tab="orders">Commandes</a>
                <a href="#stats" class="tab-link" data-tab="stats">Statistiques</a>
            </nav>
            
            <button class="logout-btn" id="logoutBtn">D√©connexion</button>
        </div>
    </header>

    <!-- Page Admin -->
    <section class="admin-page">
        <div class="container">
            <div class="admin-header">
                <h1 class="admin-title">Administration</h1>
                <div class="admin-info">
                    <p>Connect√© en tant qu'<strong>Administrateur</strong></p>
                    <small>Derni√®re connexion: <span id="lastLogin">Aujourd'hui</span></small>
                </div>
            </div>

            <!-- Statistiques -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalProducts">0</div>
                    <div class="stat-label">Produits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalOrders">0</div>
                    <div class="stat-label">Commandes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pendingOrders">0</div>
                    <div class="stat-label">Commandes en attente</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">0 FCFA</div>
                    <div class="stat-label">Chiffre d'affaires</div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="admin-tabs">
                <button class="tab-btn active" data-tab="products">Gestion des produits</button>
                <button class="tab-btn" data-tab="orders">Gestion des commandes</button>
                <button class="tab-btn" data-tab="stats">Statistiques d√©taill√©es</button>
                <button class="tab-btn" data-tab="sync" id="syncTabBtn">Synchroniser</button>
            </div>

            <!-- Onglet Produits -->
            <div class="tab-content active" id="products-tab">
                <div class="admin-section">
                    <h2 class="section-title">Ajouter un nouveau produit</h2>
                    <form id="productForm" class="product-form">
                        <div class="form-group">
                            <label for="productName">Nom du produit *</label>
                            <input type="text" id="productName" name="productName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="productCategory">Cat√©gorie *</label>
                            <select id="productCategory" name="productCategory" required>
                                <option value="">S√©lectionnez une cat√©gorie</option>
                                <option value="maillot">Maillot</option>
                                <option value="blouson">Blouson</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productColor">Couleur *</label>
                            <select id="productColor" name="productColor" required>
                                <option value="">S√©lectionnez une couleur</option>
                                <option value="vert">Vert</option>
                                <option value="blanc">Blanc</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productPrice">Prix de base (FCFA) *</label>
                            <input type="number" id="productPrice" name="productPrice" required min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="productFlocage">Flocage disponible</label>
                            <select id="productFlocage" name="productFlocage">
                                <option value="true">Oui</option>
                                <option value="false">Non</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productFlocagePrice">Prix avec flocage (FCFA)</label>
                            <input type="number" id="productFlocagePrice" name="productFlocagePrice" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="productSizes">Tailles disponibles *</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="size" value="XS"> XS</label>
                                <label><input type="checkbox" name="size" value="S"> S</label>
                                <label><input type="checkbox" name="size" value="M"> M</label>
                                <label><input type="checkbox" name="size" value="L"> L</label>
                                <label><input type="checkbox" name="size" value="XL"> XL</label>
                                <label><input type="checkbox" name="size" value="XXL"> XXL</label>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="productDescription">Description</label>
                            <textarea id="productDescription" name="productDescription"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="productImage">URL de l'image</label>
                            <input type="text" id="productImage" name="productImage" placeholder="https://via.placeholder.com/300x300">
                        </div>
                        
                        <div class="form-group">
                            <label for="productStock">Stock initial</label>
                            <input type="number" id="productStock" name="productStock" value="10" min="0">
                        </div>
                        
                        <div class="form-group full-width">
                            <button type="submit" class="btn btn-secondary">Ajouter le produit</button>
                            <button type="button" class="btn" onclick="syncProductsFromCatalogue()">Importer du catalogue</button>
                        </div>
                    </form>
                </div>

                <div class="admin-section">
                    <h2 class="section-title">Liste des produits</h2>
                    <div class="search-box">
                        <input type="text" id="productSearch" placeholder="Rechercher un produit...">
                        <span class="search-icon">üîç</span>
                    </div>
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Nom</th>
                                <th>Cat√©gorie</th>
                                <th>Prix</th>
                                <th>Stock</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsList">
                            <!-- Produits g√©n√©r√©s dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Onglet Commandes -->
            <div class="tab-content" id="orders-tab">
                <div class="admin-section">
                    <h2 class="section-title">Toutes les commandes</h2>
                    <div class="search-box">
                        <input type="text" id="orderSearch" placeholder="Rechercher une commande...">
                        <span class="search-icon">üîç</span>
                    </div>
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Client</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersList">
                            <!-- Commandes g√©n√©r√©es dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Onglet Statistiques -->
            <div class="tab-content" id="stats-tab">
                <div class="admin-section">
                    <h2 class="section-title">Statistiques d√©taill√©es</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="statsProducts">0</div>
                            <div class="stat-label">Produits en vente</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsMaillots">0</div>
                            <div class="stat-label">Maillots vendus</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsBlousons">0</div>
                            <div class="stat-label">Blousons vendus</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsAvgOrder">0 FCFA</div>
                            <div class="stat-label">Panier moyen</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h3>Produits les plus populaires</h3>
                        <div id="popularProducts" style="margin-top: 15px;">
                            <!-- G√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Synchronisation -->
            <div class="tab-content" id="sync-tab">
                <div class="admin-section">
                    <h2 class="section-title">Synchronisation des donn√©es</h2>
                    
                    <div style="margin-bottom: 30px;">
                        <h3>√âtat de la synchronisation</h3>
                        <div id="syncStatus" style="padding: 20px; background-color: var(--light-gray); border-radius: var(--border-radius); margin-top: 15px;">
                            <p><strong>Derni√®re synchronisation:</strong> <span id="lastSyncTime">Jamais</span></p>
                            <p><strong>Produits synchronis√©s:</strong> <span id="syncProductsCount">0</span></p>
                            <p><strong>Commandes synchronis√©es:</strong> <span id="syncOrdersCount">0</span></p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="syncAllData()">
                            üîÑ Synchroniser toutes les donn√©es
                        </button>
                        <button class="btn" onclick="syncProductsFromCatalogue()">
                            üì¶ Synchroniser les produits
                        </button>
                        <button class="btn" onclick="syncOrdersFromStorage()">
                            üìã Synchroniser les commandes
                        </button>
                        <button class="btn btn-warning" onclick="exportData()">
                            üíæ Exporter les donn√©es
                        </button>
                        <button class="btn btn-danger" onclick="clearAllData()">
                            üóëÔ∏è Effacer toutes les donn√©es
                        </button>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h3>Notifications</h3>
                        <div style="margin-top: 15px;">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="notifyNewOrders" checked>
                                Notifier les nouvelles commandes
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                <input type="checkbox" id="notifyLowStock" checked>
                                Notifier les stocks bas
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal D√©tails Commande -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <h2 class="modal-title">D√©tails de la commande</h2>
            <div id="orderDetails">
                <!-- D√©tails g√©n√©r√©s dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Modal D√©tails Produit -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="modal-close" id="productModalClose">&times;</button>
            <h2 class="modal-title">Modifier le produit</h2>
            <form id="editProductForm">
                <!-- Formulaire g√©n√©r√© dynamiquement -->
            </form>
        </div>
    </div>

    <script>
        // Base de donn√©es des produits du catalogue
        const catalogueProducts = [
            {
                id: "maillot-vert",
                name: "Maillot S√©n√©gal Vert",
                category: "maillot",
                price: 7500,
                priceWithFlocage: 10000,
                color: "vert",
                sizes: ["S", "M", "L", "XL", "XXL"],
                image: "https://via.placeholder.com/300x300/00853f/ffffff?text=Maillot+Vert",
                hasFlocage: true,
                isNew: true,
                stock: 15
            },
            {
                id: "maillot-blanc",
                name: "Maillot S√©n√©gal Blanc",
                category: "maillot",
                price: 7500,
                priceWithFlocage: 10000,
                color: "blanc",
                sizes: ["S", "M", "L", "XL"],
                image: "https://via.placeholder.com/300x300/ffffff/000000?text=Maillot+Blanc",
                hasFlocage: true,
                isNew: false,
                stock: 10
            },
            {
                id: "blouson-vert",
                name: "Blouson S√©n√©gal Vert",
                category: "blouson",
                price: 12000,
                color: "vert",
                sizes: ["M", "L", "XL", "XXL"],
                image: "https://via.placeholder.com/300x300/00853f/ffffff?text=Blouson+Vert",
                hasFlocage: false,
                isNew: true,
                stock: 8
            }
        ];

        // Donn√©es initiales
        let products = JSON.parse(localStorage.getItem('adminProducts')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let notifications = JSON.parse(localStorage.getItem('adminNotifications')) || [];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Synchroniser les produits du catalogue
            syncProductsFromCatalogue();
            
            // Synchroniser les commandes du localStorage
            syncOrdersFromStorage();
            
            // Mettre √† jour l'affichage
            updateStats();
            displayProducts();
            displayOrders();
            setupEventListeners();
            
            // Afficher les notifications
            checkNotifications();
            
            // Mettre √† jour la derni√®re connexion
            const lastLogin = localStorage.getItem('adminLastLogin');
            if (lastLogin) {
                const date = new Date(lastLogin);
                document.getElementById('lastLogin').textContent = date.toLocaleString();
            }
        });

        // Synchroniser les produits depuis le catalogue
        function syncProductsFromCatalogue() {
            // Si aucun produit dans l'admin, importer tout le catalogue
            if (products.length === 0) {
                products = [...catalogueProducts];
                localStorage.setItem('adminProducts', JSON.stringify(products));
                showNotification('Produits import√©s depuis le catalogue', 'success');
            } else {
                // Ajouter les nouveaux produits du catalogue qui n'existent pas dans l'admin
                let newProductsCount = 0;
                catalogueProducts.forEach(catalogueProduct => {
                    const exists = products.some(product => product.id === catalogueProduct.id);
                    if (!exists) {
                        products.push(catalogueProduct);
                        newProductsCount++;
                    }
                });
                
                if (newProductsCount > 0) {
                    localStorage.setItem('adminProducts', JSON.stringify(products));
                    showNotification(`${newProductsCount} nouveau(x) produit(s) import√©(s)`, 'success');
                } else {
                    showNotification('Aucun nouveau produit √† importer', 'warning');
                }
            }
            
            updateStats();
            displayProducts();
            
            // Mettre √† jour le statut de synchronisation
            updateSyncStatus();
        }

        // Synchroniser les commandes depuis le localStorage
        function syncOrdersFromStorage() {
            // R√©cup√©rer toutes les commandes du localStorage
            const allOrders = [];
            
            // Commandes depuis currentOrder (une seule commande √† la fois)
            const currentOrder = JSON.parse(localStorage.getItem('currentOrder'));
            if (currentOrder) {
                // Ajouter la commande actuelle
                allOrders.push(currentOrder);
                
                // Ne pas supprimer currentOrder pour permettre la reconfirmation si besoin
            }
            
            // Commandes depuis orders (historique des commandes pass√©es)
            const storedOrders = JSON.parse(localStorage.getItem('orders')) || [];
            storedOrders.forEach(order => {
                // V√©rifier si la commande existe d√©j√†
                const exists = allOrders.some(o => o.id === order.id);
                if (!exists) {
                    allOrders.push(order);
                }
            });
            
            // Commandes depuis le panier (commandes en cours)
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length > 0) {
                // Cr√©er une commande fictive pour le panier actuel
                const cartOrder = {
                    id: 'PANIER-' + Date.now(),
                    date: new Date().toISOString(),
                    status: 'panier',
                    customer: {
                        firstName: 'Client',
                        lastName: 'En cours'
                    },
                    items: cart,
                    total: calculateCartTotal(cart),
                    payment: { method: 'non-d√©fini' },
                    shipping: { address: 'Non sp√©cifi√©' }
                };
                allOrders.push(cartOrder);
            }
            
            // Mettre √† jour la liste des commandes
            orders = allOrders;
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Mettre √† jour l'affichage
            updateStats();
            displayOrders();
            
            // V√©rifier les nouvelles commandes
            checkNewOrders();
            
            // Mettre √† jour le statut de synchronisation
            updateSyncStatus();
            
            return allOrders.length;
        }

        // Calculer le total du panier
        function calculateCartTotal(cartItems) {
            const total = cartItems.reduce((sum, item) => {
                return sum + (item.unitPrice * item.quantity);
            }, 0);
            return total.toLocaleString() + ' FCFA';
        }

        // Synchroniser toutes les donn√©es
        function syncAllData() {
            const productsCount = syncProductsFromCatalogue();
            const ordersCount = syncOrdersFromStorage();
            
            showNotification(`Synchronisation termin√©e: ${productsCount} produits, ${ordersCount} commandes`, 'success');
            updateSyncStatus();
        }

        // Mettre √† jour le statut de synchronisation
        function updateSyncStatus() {
            const now = new Date();
            document.getElementById('lastSyncTime').textContent = now.toLocaleString();
            document.getElementById('syncProductsCount').textContent = products.length;
            document.getElementById('syncOrdersCount').textContent = orders.length;
        }

        // V√©rifier les nouvelles commandes
        function checkNewOrders() {
            const notifyNewOrders = document.getElementById('notifyNewOrders').checked;
            
            if (!notifyNewOrders) return;
            
            // Compter les commandes en attente
            const pendingOrders = orders.filter(order => order.status === 'pending');
            
            if (pendingOrders.length > 0) {
                // V√©rifier si nous avons d√©j√† notifi√© ces commandes
                const lastNotified = notifications.lastOrderNotification || 0;
                const newOrders = pendingOrders.filter(order => 
                    new Date(order.date).getTime() > lastNotified
                );
                
                if (newOrders.length > 0) {
                    showNotification(`‚ö†Ô∏è ${newOrders.length} nouvelle(s) commande(s) en attente!`, 'warning');
                    
                    // Mettre √† jour la derni√®re notification
                    notifications.lastOrderNotification = Date.now();
                    localStorage.setItem('adminNotifications', JSON.stringify(notifications));
                }
            }
        }

        // V√©rifier les notifications
        function checkNotifications() {
            // V√©rifier les stocks bas
            const notifyLowStock = document.getElementById('notifyLowStock')?.checked || true;
            
            if (notifyLowStock) {
                const lowStockProducts = products.filter(product => product.stock < 5);
                if (lowStockProducts.length > 0) {
                    showNotification(`‚ö†Ô∏è ${lowStockProducts.length} produit(s) avec stock bas`, 'warning');
                }
            }
        }

        // Afficher une notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = 'notification ' + type;
            notification.style.display = 'flex';
            
            // Auto-hide apr√®s 5 secondes
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }

        function hideNotification() {
            document.getElementById('notification').style.display = 'none';
        }

        // Mise √† jour des statistiques
        function updateStats() {
            // Produits
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('statsProducts').textContent = products.length;
            
            // Commandes (exclure les paniers)
            const realOrders = orders.filter(order => order.status !== 'panier');
            const totalOrders = realOrders.length;
            const pendingOrders = realOrders.filter(order => order.status === 'pending').length;
            
            // Calculer les produits vendus
            let maillotsSold = 0;
            let blousonsSold = 0;
            let totalRevenue = 0;
            
            realOrders.forEach(order => {
                // Calculer le revenu (extraire le nombre du total)
                const totalMatch = order.total?.match(/(\d+)/);
                if (totalMatch) {
                    totalRevenue += parseInt(totalMatch[1]);
                }
                
                // Compter les produits
                if (order.items) {
                    order.items.forEach(item => {
                        if (item.category === 'maillot' || item.name?.toLowerCase().includes('maillot')) {
                            maillotsSold += item.quantity || 1;
                        } else if (item.category === 'blouson' || item.name?.toLowerCase().includes('blouson')) {
                            blousonsSold += item.quantity || 1;
                        }
                    });
                }
            });
            
            // Panier moyen
            const avgOrder = totalOrders > 0 ? totalRevenue / totalOrders : 0;
            
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('pendingOrders').textContent = pendingOrders;
            document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + ' FCFA';
            document.getElementById('statsMaillots').textContent = maillotsSold;
            document.getElementById('statsBlousons').textContent = blousonsSold;
            document.getElementById('statsAvgOrder').textContent = avgOrder.toLocaleString() + ' FCFA';
            
            // Mettre √† jour les produits populaires
            updatePopularProducts();
        }

        // Mettre √† jour les produits populaires
        function updatePopularProducts() {
            const popularProductsDiv = document.getElementById('popularProducts');
            const salesCount = {};
            
            // Compter les ventes par produit
            orders.forEach(order => {
                if (order.items) {
                    order.items.forEach(item => {
                        const productId = item.id || item.name;
                        salesCount[productId] = (salesCount[productId] || 0) + (item.quantity || 1);
                    });
                }
            });
            
            // Trier par ventes
            const sortedProducts = Object.entries(salesCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedProducts.length > 0) {
                let html = '<ul style="list-style-type: none; padding: 0;">';
                sortedProducts.forEach(([productId, sales]) => {
                    const product = products.find(p => p.id === productId) || 
                                   products.find(p => p.name === productId) || 
                                   { name: productId };
                    html += `<li style="padding: 8px 0; border-bottom: 1px solid #eee;">
                        ${product.name} - <strong>${sales}</strong> vente(s)
                    </li>`;
                });
                html += '</ul>';
                popularProductsDiv.innerHTML = html;
            } else {
                popularProductsDiv.innerHTML = '<p>Aucune vente enregistr√©e</p>';
            }
        }

        // Afficher les produits
        function displayProducts(filter = '') {
            const productsList = document.getElementById('productsList');
            let filteredProducts = products;
            
            if (filter) {
                filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(filter.toLowerCase()) ||
                    product.category.toLowerCase().includes(filter.toLowerCase()) ||
                    product.color?.toLowerCase().includes(filter.toLowerCase())
                );
            }
            
            productsList.innerHTML = '';
            
            filteredProducts.forEach((product, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${product.image || 'https://via.placeholder.com/60x60'}" 
                             alt="${product.name}" 
                             class="product-image-small">
                    </td>
                    <td>${product.name}</td>
                    <td>${product.category}</td>
                    <td>${product.price.toLocaleString()} FCFA${product.hasFlocage ? ' - ' + (product.priceWithFlocage || product.price).toLocaleString() + ' FCFA' : ''}</td>
                    <td><span style="color: ${product.stock < 5 ? 'var(--accent-color)' : 'inherit'}">${product.stock || 10}</span></td>
                    <td class="product-actions">
                        <button class="btn btn-sm btn-warning" onclick="editProduct(${index})">Modifier</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteProduct(${index})">Supprimer</button>
                    </td>
                `;
                productsList.appendChild(row);
            });
        }

        // Afficher les commandes
        function displayOrders(filter = '') {
            const ordersList = document.getElementById('ordersList');
            let filteredOrders = orders.filter(order => order.status !== 'panier'); // Exclure les paniers
            
            if (filter) {
                filteredOrders = filteredOrders.filter(order => 
                    (order.id && order.id.toLowerCase().includes(filter.toLowerCase())) ||
                    (order.customer?.firstName && order.customer.firstName.toLowerCase().includes(filter.toLowerCase())) ||
                    (order.customer?.lastName && order.customer.lastName.toLowerCase().includes(filter.toLowerCase()))
                );
            }
            
            ordersList.innerHTML = '';
            
            filteredOrders.forEach((order, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.id || 'N/A'}</td>
                    <td>${order.date ? new Date(order.date).toLocaleDateString() : 'N/A'}</td>
                    <td>${order.customer?.firstName || ''} ${order.customer?.lastName || ''}</td>
                    <td>${order.total || '0 FCFA'}</td>
                    <td><span class="status-badge status-${order.status || 'pending'}">${getStatusText(order.status)}</span></td>
                    <td class="product-actions">
                        <button class="btn btn-sm" onclick="viewOrder(${index})">Voir</button>
                        ${order.status === 'pending' ? `<button class="btn btn-sm btn-success" onclick="updateOrderStatus(${index}, 'confirmed')">Confirmer</button>` : ''}
                    </td>
                `;
                ordersList.appendChild(row);
            });
        }

        // Obtenir le texte du statut
        function getStatusText(status) {
            const statusMap = {
                'pending': 'En attente',
                'confirmed': 'Confirm√©e',
                'shipped': 'Exp√©di√©e',
                'delivered': 'Livr√©e',
                'cancelled': 'Annul√©e',
                'panier': 'Panier'
            };
            return statusMap[status] || status || 'En attente';
        }

        // Ajouter un produit
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const selectedSizes = [];
            document.querySelectorAll('input[name="size"]:checked').forEach(checkbox => {
                selectedSizes.push(checkbox.value);
            });
            
            const newProduct = {
                id: 'prod-' + Date.now(),
                name: formData.get('productName'),
                category: formData.get('productCategory'),
                color: formData.get('productColor'),
                price: parseFloat(formData.get('productPrice')),
                hasFlocage: formData.get('productFlocage') === 'true',
                priceWithFlocage: formData.get('productFlocagePrice') ? parseFloat(formData.get('productFlocagePrice')) : null,
                sizes: selectedSizes,
                description: formData.get('productDescription'),
                image: formData.get('productImage') || 'https://via.placeholder.com/300x300',
                stock: parseInt(formData.get('productStock') || 10),
                createdAt: new Date().toISOString()
            };
            
            products.push(newProduct);
            localStorage.setItem('adminProducts', JSON.stringify(products));
            
            showNotification('Produit ajout√© avec succ√®s !', 'success');
            this.reset();
            updateStats();
            displayProducts();
        });

        // Modifier un produit
        function editProduct(index) {
            const product = products[index];
            const modal = document.getElementById('productModal');
            const form = document.getElementById('editProductForm');
            
            // Cr√©er les cases √† cocher pour les tailles
            let sizesHTML = '';
            const availableSizes = ['XS', 'S', 'M', 'L', 'XL', 'XXL'];
            availableSizes.forEach(size => {
                const checked = product.sizes?.includes(size) ? 'checked' : '';
                sizesHTML += `
                    <label style="display: inline-flex; align-items: center; gap: 5px; margin-right: 15px;">
                        <input type="checkbox" name="editSize" value="${size}" ${checked}>
                        ${size}
                    </label>
                `;
            });
            
            form.innerHTML = `
                <div class="product-form">
                    <input type="hidden" id="editIndex" value="${index}">
                    <div class="form-group">
                        <label for="editName">Nom du produit</label>
                        <input type="text" id="editName" value="${product.name}" required>
                    </div>
                    <div class="form-group">
                        <label for="editCategory">Cat√©gorie</label>
                        <select id="editCategory" required>
                            <option value="maillot" ${product.category === 'maillot' ? 'selected' : ''}>Maillot</option>
                            <option value="blouson" ${product.category === 'blouson' ? 'selected' : ''}>Blouson</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPrice">Prix (FCFA)</label>
                        <input type="number" id="editPrice" value="${product.price}" required>
                    </div>
                    <div class="form-group">
                        <label for="editFlocagePrice">Prix avec flocage (FCFA)</label>
                        <input type="number" id="editFlocagePrice" value="${product.priceWithFlocage || ''}">
                    </div>
                    <div class="form-group">
                        <label>Tailles disponibles</label>
                        <div>${sizesHTML}</div>
                    </div>
                    <div class="form-group">
                        <label for="editStock">Stock</label>
                        <input type="number" id="editStock" value="${product.stock || 10}" required>
                    </div>
                    <div class="form-group">
                        <label for="editImage">Image URL</label>
                        <input type="text" id="editImage" value="${product.image || ''}">
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="btn btn-secondary">Enregistrer les modifications</button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'flex';
            
            // Ajouter l'√©v√©nement submit
            form.onsubmit = function(e) {
                e.preventDefault();
                
                const selectedSizes = [];
                document.querySelectorAll('input[name="editSize"]:checked').forEach(checkbox => {
                    selectedSizes.push(checkbox.value);
                });
                
                products[index].name = document.getElementById('editName').value;
                products[index].category = document.getElementById('editCategory').value;
                products[index].price = parseFloat(document.getElementById('editPrice').value);
                products[index].priceWithFlocage = document.getElementById('editFlocagePrice').value ? 
                    parseFloat(document.getElementById('editFlocagePrice').value) : null;
                products[index].sizes = selectedSizes;
                products[index].stock = parseInt(document.getElementById('editStock').value);
                products[index].image = document.getElementById('editImage').value;
                
                localStorage.setItem('adminProducts', JSON.stringify(products));
                modal.style.display = 'none';
                updateStats();
                displayProducts();
                showNotification('Produit modifi√© avec succ√®s !', 'success');
            };
        }

        // Supprimer un produit
        function deleteProduct(index) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer ce produit ?')) {
                const productName = products[index].name;
                products.splice(index, 1);
                localStorage.setItem('adminProducts', JSON.stringify(products));
                updateStats();
                displayProducts();
                showNotification(`Produit "${productName}" supprim√© avec succ√®s !`, 'success');
            }
        }

        // Voir les d√©tails d'une commande
        function viewOrder(index) {
            const order = orders[index];
            const modal = document.getElementById('orderModal');
            const details = document.getElementById('orderDetails');
            
            let itemsHTML = '<h3>Articles command√©s:</h3>';
            if (order.items && order.items.length > 0) {
                itemsHTML += '<ul style="list-style-type: none; padding: 0;">';
                order.items.forEach((item, i) => {
                    itemsHTML += `
                        <li style="padding: 10px 0; border-bottom: 1px solid #eee;">
                            <strong>${item.name}</strong><br>
                            Quantit√©: ${item.quantity || 1}<br>
                            Prix unitaire: ${item.unitPrice?.toLocaleString() || '0'} FCFA<br>
                            ${item.color ? `Couleur: ${item.color}<br>` : ''}
                            ${item.size ? `Taille: ${item.size}<br>` : ''}
                            ${item.flocage === 'avec' && item.personalization ? 
                                `Personnalisation: ${item.personalization.name} ${item.personalization.number}<br>` : ''}
                        </li>
                    `;
                });
                itemsHTML += '</ul>';
            } else {
                itemsHTML += '<p>Aucun article</p>';
            }
            
            details.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <p><strong>ID Commande:</strong> ${order.id || 'N/A'}</p>
                    <p><strong>Date:</strong> ${order.date ? new Date(order.date).toLocaleString() : 'N/A'}</p>
                    <p><strong>Statut:</strong> <span class="status-badge status-${order.status || 'pending'}">${getStatusText(order.status)}</span></p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3>Informations client:</h3>
                    <p><strong>Nom:</strong> ${order.customer?.firstName || ''} ${order.customer?.lastName || ''}</p>
                    <p><strong>Email:</strong> ${order.customer?.email || 'N/A'}</p>
                    <p><strong>T√©l√©phone:</strong> ${order.customer?.phone || 'N/A'}</p>
                </div>
                
                ${order.shipping ? `
                <div style="margin-bottom: 20px;">
                    <h3>Adresse de livraison:</h3>
                    <p>${order.shipping.address || 'N/A'}</p>
                    <p>${order.shipping.city || ''}, ${order.shipping.postalCode || ''}</p>
                    <p>${order.shipping.country || ''}</p>
                    ${order.shipping.instructions ? `<p><strong>Instructions:</strong> ${order.shipping.instructions}</p>` : ''}
                </div>
                ` : ''}
                
                ${itemsHTML}
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd;">
                    <p><strong>M√©thode de paiement:</strong> ${getPaymentMethodText(order.payment?.method)}</p>
                    <p><strong>Total:</strong> ${order.total || '0 FCFA'}</p>
                </div>
                
                ${order.status !== 'panier' ? `
                <div style="margin-top: 30px;">
                    <h3>Actions:</h3>
                    <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                        ${order.status === 'pending' ? `<button class="btn btn-success" onclick="updateOrderStatus(${index}, 'confirmed')">Confirmer la commande</button>` : ''}
                        ${order.status === 'confirmed' ? `<button class="btn btn-secondary" onclick="updateOrderStatus(${index}, 'shipped')">Marquer comme exp√©di√©e</button>` : ''}
                        ${order.status === 'shipped' ? `<button class="btn btn-secondary" onclick="updateOrderStatus(${index}, 'delivered')">Marquer comme livr√©e</button>` : ''}
                        ${order.status !== 'cancelled' && order.status !== 'delivered' ? `<button class="btn btn-danger" onclick="updateOrderStatus(${index}, 'cancelled')">Annuler</button>` : ''}
                    </div>
                </div>
                ` : ''}
            `;
            
            modal.style.display = 'flex';
        }

        // Obtenir le texte de la m√©thode de paiement
        function getPaymentMethodText(method) {
            const methodMap = {
                'wave': 'Wave',
                'orange-money': 'Orange Money',
                'free-money': 'Free Money',
                'especes': 'Paiement √† la livraison'
            };
            return methodMap[method] || method || 'Non sp√©cifi√©';
        }

        // Mettre √† jour le statut d'une commande
        function updateOrderStatus(index, newStatus) {
            orders[index].status = newStatus;
            localStorage.setItem('orders', JSON.stringify(orders));
            
            updateStats();
            displayOrders();
            
            const modal = document.getElementById('orderModal');
            if (modal.style.display === 'flex') {
                viewOrder(index);
            }
            
            showNotification(`Statut de la commande mis √† jour: ${getStatusText(newStatus)}`, 'success');
        }

        // Exporter les donn√©es
        function exportData() {
            const data = {
                products: products,
                orders: orders.filter(order => order.status !== 'panier'),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `maillots-senegal-export-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Donn√©es export√©es avec succ√®s !', 'success');
        }

        // Effacer toutes les donn√©es
        function clearAllData() {
            if (confirm('‚ö†Ô∏è ATTENTION: Cette action effacera TOUTES les donn√©es. √ätes-vous s√ªr ?')) {
                localStorage.removeItem('adminProducts');
                localStorage.removeItem('orders');
                localStorage.removeItem('adminNotifications');
                
                products = [];
                orders = [];
                notifications = [];
                
                updateStats();
                displayProducts();
                displayOrders();
                updateSyncStatus();
                
                showNotification('Toutes les donn√©es ont √©t√© effac√©es', 'success');
            }
        }

        // Configuration des √©v√©nements
        function setupEventListeners() {
            // Recherche produits
            document.getElementById('productSearch').addEventListener('input', function(e) {
                displayProducts(e.target.value);
            });

            // Recherche commandes
            document.getElementById('orderSearch').addEventListener('input', function(e) {
                displayOrders(e.target.value);
            });

            // Tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Retirer la classe active de tous les tabs
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Ajouter la classe active au tab cliqu√©
                    this.classList.add('active');
                    const tabId = this.dataset.tab + '-tab';
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Navigation admin
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.dataset.tab + '-tab';
                    
                    // Retirer la classe active de tous
                    document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('active'));
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Ajouter la classe active
                    this.classList.add('active');
                    document.querySelector(`.tab-btn[data-tab="${this.dataset.tab}"]`).classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Fermer les modals
            document.getElementById('modalClose').addEventListener('click', function() {
                document.getElementById('orderModal').style.display = 'none';
            });

            document.getElementById('productModalClose').addEventListener('click', function() {
                document.getElementById('productModal').style.display = 'none';
            });

            // Fermer les modals en cliquant √† l'ext√©rieur
            window.addEventListener('click', function(e) {
                if (e.target.id === 'orderModal') {
                    document.getElementById('orderModal').style.display = 'none';
                }
                if (e.target.id === 'productModal') {
                    document.getElementById('productModal').style.display = 'none';
                }
            });

            // D√©connexion
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('adminLoggedIn');
                window.location.href = 'index.html';
            });

            // Synchronisation automatique toutes les 30 secondes
            setInterval(() => {
                syncOrdersFromStorage();
                checkNotifications();
            }, 30000);
        }
    </script>
</body>
</html>