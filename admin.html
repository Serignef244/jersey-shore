<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Maillots & Blousons S√©n√©gal</title>
    <style>
        /* Variables CSS style footeux */
        :root {
            --primary-green: #00853f;        /* Vert S√©n√©gal */
            --secondary-yellow: #fdef05;     /* Jaune foot */
            --accent-red: #fd0d1b;          /* Rouge foot */
            --field-green: #2e8b57;         /* Vert terrain */
            --white: #ffffff;
            --dark-gray: #1a1a1a;
            --light-gray: #f5f5f5;
            --grass-light: #3cb371;
            --grass-dark: #2e8b57;
            --stadium: #8b4513;
            --border-radius: 6px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--dark-gray);
            background: linear-gradient(135deg, var(--light-gray) 0%, #e8f5e9 100%);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(46, 139, 87, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(253, 239, 5, 0.05) 0%, transparent 20%);
            min-height: 100vh;
        }

        /* Effets de terrain de foot en arri√®re-plan */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(90deg, transparent 49%, var(--field-green) 49%, var(--field-green) 51%, transparent 51%),
                linear-gradient(0deg, transparent 49%, var(--field-green) 49%, var(--field-green) 51%, transparent 51%);
            background-size: 50px 50px;
            opacity: 0.03;
            z-index: -1;
            pointer-events: none;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        button {
            cursor: pointer;
            border: none;
            outline: none;
            font-family: inherit;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Boutons style footeux */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary-green), var(--grass-light));
            color: var(--white);
            border-radius: var(--border-radius);
            font-weight: 700;
            transition: var(--transition);
            text-align: center;
            border: 2px solid var(--primary-green);
            text-transform: uppercase;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 133, 63, 0.3);
            background: linear-gradient(135deg, var(--grass-light), var(--primary-green));
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary-yellow), #ffd700);
            color: var(--dark-gray);
            border-color: var(--secondary-yellow);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #ffd700, var(--secondary-yellow));
            box-shadow: 0 6px 15px rgba(253, 239, 5, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent-red), #ff6b6b);
            border-color: var(--accent-red);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #ff6b6b, var(--accent-red));
            box-shadow: 0 6px 15px rgba(253, 13, 27, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9800, #ffc107);
            color: var(--dark-gray);
            border-color: #ff9800;
        }

        .btn-warning:hover {
            background: linear-gradient(135deg, #ffc107, #ff9800);
            box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #34ce57);
            border-color: #28a745;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #34ce57, #28a745);
            box-shadow: 0 6px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        /* Header style footeux */
        header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--grass-dark) 100%);
            color: var(--white);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border-bottom: 4px solid var(--secondary-yellow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            background: rgba(0, 0, 0, 0.2);
            padding: 10px 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--secondary-yellow);
        }

        .logo span {
            color: var(--secondary-yellow);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .logo img {
            height: 50px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .admin-nav {
            display: flex;
            gap: 5px;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px;
            border-radius: var(--border-radius);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .admin-nav a {
            padding: 12px 20px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-nav a:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .admin-nav a.active {
            background: var(--secondary-yellow);
            color: var(--primary-green);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .logout-btn {
            background: linear-gradient(135deg, var(--accent-red), #ff4444);
            padding: 12px 24px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-transform: uppercase;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(253, 13, 27, 0.4);
            background: linear-gradient(135deg, #ff4444, var(--accent-red));
        }

        /* Page Admin */
        .admin-page {
            padding: 40px 0 60px;
            min-height: calc(100vh - 150px);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-yellow);
            position: relative;
        }

        .admin-header::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--primary-green) 0%, 
                var(--secondary-yellow) 33%, 
                var(--accent-red) 66%, 
                var(--primary-green) 100%);
        }

        .admin-title {
            color: var(--primary-green);
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0 var(--secondary-yellow);
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .admin-info {
            background: var(--white);
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 2px solid var(--primary-green);
        }

        .admin-info p {
            color: var(--primary-green);
            font-weight: 600;
        }

        .admin-info small {
            color: #666;
            font-size: 0.9rem;
        }

        /* Cartes de statistiques style cartes de joueur */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--white), #f8f9fa);
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--box-shadow);
            border: 3px solid var(--primary-green);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(0, 133, 63, 0.1) 50%, 
                transparent 70%);
            animation: shine 3s infinite linear;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 133, 63, 0.2);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary-green);
            margin-bottom: 10px;
            text-shadow: 2px 2px 0 var(--secondary-yellow);
        }

        .stat-label {
            color: var(--dark-gray);
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Sections admin */
        .admin-section {
            background: linear-gradient(135deg, var(--white), #f8f9fa);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
            border: 3px solid var(--primary-green);
            position: relative;
        }

        .admin-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, 
                var(--primary-green) 0%, 
                var(--secondary-yellow) 50%, 
                var(--primary-green) 100%);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .section-title {
            color: var(--primary-green);
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-yellow);
        }

        .section-title::before {
            content: '‚öΩ';
            font-size: 2rem;
        }

        /* Formulaire style feuille d'√©quipe */
        .product-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            background: rgba(0, 133, 63, 0.05);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 2px solid var(--primary-green);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--primary-green);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
            font-family: 'Montserrat', sans-serif;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(0, 133, 63, 0.2);
            outline: none;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            cursor: pointer;
            padding: 8px 15px;
            background: var(--white);
            border-radius: var(--border-radius);
            border: 2px solid #ddd;
            transition: var(--transition);
            text-transform: none;
            color: var(--dark-gray);
        }

        .checkbox-group label:hover {
            border-color: var(--primary-green);
            transform: translateY(-2px);
        }

        .checkbox-group input:checked + label {
            background: var(--primary-green);
            color: var(--white);
            border-color: var(--primary-green);
        }

        /* Tables style tableau des scores */
        .products-table,
        .orders-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            border: 3px solid var(--primary-green);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .products-table th,
        .orders-table th {
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            color: var(--white);
            padding: 18px;
            text-align: left;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 3px solid var(--secondary-yellow);
            position: relative;
        }

        .products-table th::after,
        .orders-table th::after {
            content: '';
            position: absolute;
            right: 0;
            top: 25%;
            height: 50%;
            width: 2px;
            background: rgba(255, 255, 255, 0.3);
        }

        .products-table th:last-child::after,
        .orders-table th:last-child::after {
            display: none;
        }

        .products-table td,
        .orders-table td {
            padding: 18px;
            border-bottom: 1px solid #eee;
            background: var(--white);
            transition: var(--transition);
        }

        .products-table tr:last-child td,
        .orders-table tr:last-child td {
            border-bottom: none;
        }

        .products-table tr:hover td,
        .orders-table tr:hover td {
            background: linear-gradient(90deg, rgba(0, 133, 63, 0.05), transparent);
            transform: scale(1.01);
        }

        .product-image-small {
            width: 70px;
            height: 70px;
            border-radius: var(--border-radius);
            object-fit: cover;
            border: 2px solid var(--primary-green);
            transition: var(--transition);
        }

        .product-image-small:hover {
            transform: scale(1.1);
            border-color: var(--secondary-yellow);
        }

        .product-actions,
        .order-actions {
            display: flex;
            gap: 10px;
        }

        /* Badges de statut style cartons */
        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
        }

        .status-pending {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            border-color: #ffd43b;
        }

        .status-confirmed {
            background: linear-gradient(135deg, #d4edda, #a3e4b8);
            color: #155724;
            border-color: #28a745;
        }

        .status-shipped {
            background: linear-gradient(135deg, #cce5ff, #99c2ff);
            color: #004085;
            border-color: #17a2b8;
        }

        .status-delivered {
            background: linear-gradient(135deg, #d1ecf1, #a6e0e9);
            color: #0c5460;
            border-color: #138496;
        }

        .status-cancelled {
            background: linear-gradient(135deg, #f8d7da, #f1aeb5);
            color: #721c24;
            border-color: #dc3545;
        }

        .status-locked {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: var(--white);
            border-color: #343a40;
            position: relative;
            padding-left: 40px;
        }

        .status-locked::before {
            content: 'üîí';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Tabs style fiches joueurs */
        .admin-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 40px;
            background: var(--white);
            padding: 10px;
            border-radius: var(--border-radius);
            border: 3px solid var(--primary-green);
            box-shadow: var(--box-shadow);
            position: relative;
            overflow-x: auto;
        }

        .admin-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-green) 0%, 
                var(--secondary-yellow) 33%, 
                var(--accent-red) 66%, 
                var(--primary-green) 100%);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .tab-btn {
            padding: 15px 25px;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 700;
            color: #666;
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--border-radius);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 133, 63, 0.1), transparent);
            transition: 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover {
            background: rgba(0, 133, 63, 0.1);
            color: var(--primary-green);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            color: var(--white);
            box-shadow: 0 4px 8px rgba(0, 133, 63, 0.3);
        }

        .tab-btn.active::before {
            display: none;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        /* Modal style feuille de match */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, var(--white), #f8f9fa);
            padding: 40px;
            border-radius: var(--border-radius);
            max-width: 700px;
            width: 95%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border: 4px solid var(--primary-green);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from { 
                opacity: 0; 
                transform: scale(0.9) translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, 
                var(--primary-green) 0%, 
                var(--secondary-yellow) 33%, 
                var(--accent-red) 66%, 
                var(--primary-green) 100%);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent-red);
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid var(--white);
            z-index: 1;
        }

        .modal-close:hover {
            transform: rotate(90deg) scale(1.1);
            background: #ff4444;
        }

        .modal-title {
            color: var(--primary-green);
            margin-bottom: 25px;
            font-size: 2rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-yellow);
            text-align: center;
        }

        /* Notification style carton */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 25px;
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s ease;
            border: 3px solid var(--secondary-yellow);
            min-width: 300px;
            max-width: 400px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.success {
            background: linear-gradient(135deg, #28a745, #34ce57);
            border-color: #28a745;
        }

        .notification.error {
            background: linear-gradient(135deg, var(--accent-red), #ff6b6b);
            border-color: var(--accent-red);
        }

        .notification.warning {
            background: linear-gradient(135deg, #ffc107, #ffd54f);
            color: var(--dark-gray);
            border-color: #ffc107;
        }

        .notification-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 1.5rem;
            cursor: pointer;
            margin-left: auto;
            opacity: 0.8;
            transition: var(--transition);
        }

        .notification-close:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        /* Recherche style sifflet d'arbitre */
        .search-box {
            margin-bottom: 25px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 3px solid var(--primary-green);
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            background: var(--white);
            transition: var(--transition);
        }

        .search-box input:focus {
            box-shadow: 0 0 0 3px rgba(0, 133, 63, 0.3);
            outline: none;
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-green);
            font-size: 1.2rem;
        }

        /* Cartes de produit populaire */
        .popular-product-card {
            background: var(--white);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            border: 3px solid var(--primary-green);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
        }

        .popular-product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 133, 63, 0.2);
        }

        .popular-product-rank {
            background: linear-gradient(135deg, var(--primary-green), var(--grass-dark));
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.2rem;
            flex-shrink: 0;
            border: 3px solid var(--secondary-yellow);
        }

        /* Zone de synchronisation */
        .sync-section {
            background: rgba(0, 133, 63, 0.05);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            border: 2px dashed var(--primary-green);
        }

        .sync-status {
            background: var(--white);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border: 2px solid var(--primary-green);
        }

        .sync-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        /* Effets de ballon */
        .balloon-effect {
            position: fixed;
            width: 60px;
            height: 60px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%2300853f" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM398.9 256c0 78.9-64.1 143-143 143s-143-64.1-143-143s64.1-143 143-143s143 64.1 143 143z"/></svg>');
            background-size: contain;
            z-index: -1;
            animation: float 20s infinite linear;
            opacity: 0.1;
            pointer-events: none;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, 100px) rotate(90deg); }
            50% { transform: translate(200px, 0) rotate(180deg); }
            75% { transform: translate(100px, -100px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        /* Footer style tableau d'affichage */
        footer {
            background: linear-gradient(135deg, var(--dark-gray), #2a2a2a);
            color: var(--white);
            padding: 30px 0;
            margin-top: 60px;
            border-top: 5px solid var(--primary-green);
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--primary-green) 0%, 
                var(--secondary-yellow) 33%, 
                var(--accent-red) 66%, 
                var(--primary-green) 100%);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            text-align: center;
        }

        .footer-section h3 {
            color: var(--secondary-yellow);
            margin-bottom: 20px;
            font-size: 1.3rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .footer-section p {
            line-height: 1.8;
            opacity: 0.9;
        }

        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .admin-nav {
                gap: 3px;
            }
            
            .admin-nav a {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .logo {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .admin-nav {
                order: 3;
                width: 100%;
                justify-content: center;
            }
            
            .admin-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .admin-page {
                padding: 20px 0 40px;
            }
            
            .admin-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .admin-title {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .product-actions,
            .order-actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
            
            .product-form {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        @media (max-width: 576px) {
            .admin-section {
                padding: 20px;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .sync-buttons {
                flex-direction: column;
            }
            
            .checkbox-group {
                flex-direction: column;
            }
            
            .products-table,
            .orders-table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .notification {
                left: 20px;
                right: 20px;
                min-width: auto;
            }
        }

        /* Animation d'entr√©e */
        @keyframes entryAnimation {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-entry {
            animation: entryAnimation 0.6s ease-out;
        }

        /* D√©lai d'animation pour les √©l√©ments */
        .stats-grid > *,
        .admin-section,
        .tab-content {
            animation: entryAnimation 0.6s ease-out;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- V√©rification login -->
    <script>
        // V√©rifier si l'utilisateur est connect√©
        const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
        
        if (!isLoggedIn) {
            window.location.href = 'admin-login.html';
        }
        
        // Enregistrer la derni√®re connexion
        localStorage.setItem('adminLastLogin', new Date().toISOString());
    </script>

    <!-- Effets de ballons -->
    <div class="balloon-effect" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
    <div class="balloon-effect" style="top: 20%; right: 10%; animation-delay: -5s;"></div>
    <div class="balloon-effect" style="bottom: 30%; left: 15%; animation-delay: -10s;"></div>
    <div class="balloon-effect" style="bottom: 20%; right: 5%; animation-delay: -15s;"></div>

    <!-- Notification -->
    <div id="notification" class="notification" style="display: none;">
        <span id="notificationText"></span>
        <button class="notification-close" onclick="hideNotification()">&times;</button>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjZmRlZjA1IiBkPSJNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2czI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6TTM5OC45IDI1NmMwIDc4LjktNjQuMSAxNDMtMTQzIDE0M3MtMTQzLTY0LjEtMTQzLTE0M3M2NC4xLTE0MyAxNDMtMTQzczE0MyA2NC4xIDE0MyAxNDN6Ii8+PHBhdGggZmlsbD0iI2ZkMGQxYiIgZD0iTTM5OC45IDI1NmMwIDc4LjktNjQuMSAxNDMtMTQzIDE0M3MtMTQzLTY0LjEtMTQzLTE0M3M2NC4xLTE0MyAxNDMtMTQzczE0MyA2NC4xIDE0MyAxNDN6Ii8+PHBhdGggZmlsbD0iIzAwODUzZiIgZD0iTTI1NS45IDM2OGMtNjEuOSAwLTExMi01MC4xLTExMi0xMTJzNTAuMS0xMTIgMTEyLTExMnMxMTIgNTAuMSAxMTIgMTEycy01MC4xIDExMi0xMTIgMTEyeiIvPjxwYXRoIGZpbGw9IiNmZGVmMDUiIGQ9Ik0yODcuOSAyMjRoLTI0di00OGgtMjR2NDhoLTI0djcyaDI0djQ4aDI0di00OGgyNHYtNzJ6Ii8+PC9zdmc+" alt="Drapeau S√©n√©gal">
                <span>Administration Foot</span>
            </a>
            
            <nav class="admin-nav">
                <a href="#products" class="tab-link active" data-tab="products">
                    <i class="fas fa-tshirt"></i> Produits
                </a>
                <a href="#orders" class="tab-link" data-tab="orders">
                    <i class="fas fa-shopping-cart"></i> Commandes
                </a>
                <a href="#stats" class="tab-link" data-tab="stats">
                    <i class="fas fa-chart-line"></i> Statistiques
                </a>
            </nav>
            
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> D√©connexion
            </button>
        </div>
    </header>

    <!-- Page Admin -->
    <section class="admin-page">
        <div class="container">
            <div class="admin-header animate-entry">
                <h1 class="admin-title">Tableau de Bord Administrateur</h1>
                <div class="admin-info">
                    <p><i class="fas fa-user-shield"></i> Connect√© en tant qu'<strong>Administrateur</strong></p>
                    <small><i class="far fa-clock"></i> Derni√®re connexion: <span id="lastLogin">Maintenant</span></small>
                </div>
            </div>

            <!-- Statistiques -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalProducts">0</div>
                    <div class="stat-label"><i class="fas fa-tshirt"></i> Produits en Stock</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalOrders">0</div>
                    <div class="stat-label"><i class="fas fa-shopping-cart"></i> Commandes Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pendingOrders">0</div>
                    <div class="stat-label"><i class="fas fa-clock"></i> En Attente</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">0 FCFA</div>
                    <div class="stat-label"><i class="fas fa-money-bill-wave"></i> Chiffre d'Affaires</div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="admin-tabs">
                <button class="tab-btn active" data-tab="products">
                    <i class="fas fa-tshirt"></i> Gestion Produits
                </button>
                <button class="tab-btn" data-tab="orders">
                    <i class="fas fa-clipboard-list"></i> Gestion Commandes
                </button>
                <button class="tab-btn" data-tab="stats">
                    <i class="fas fa-chart-bar"></i> Statistiques D√©tail
                </button>
                <button class="tab-btn" data-tab="sync" id="syncTabBtn">
                    <i class="fas fa-sync-alt"></i> Synchronisation
                </button>
            </div>

            <!-- Onglet Produits -->
            <div class="tab-content active" id="products-tab">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-plus-circle"></i> Ajouter un Nouveau Produit</h2>
                    <form id="productForm" class="product-form">
                        <div class="form-group">
                            <label for="productName"><i class="fas fa-tag"></i> Nom du produit *</label>
                            <input type="text" id="productName" name="productName" placeholder="Ex: Maillot S√©n√©gal 2023" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="productCategory"><i class="fas fa-list"></i> Cat√©gorie *</label>
                            <select id="productCategory" name="productCategory" required>
                                <option value="">S√©lectionnez une cat√©gorie</option>
                                <option value="maillot">‚öΩ Maillot</option>
                                <option value="blouson">üß• Blouson</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productColor"><i class="fas fa-palette"></i> Couleur *</label>
                            <select id="productColor" name="productColor" required>
                                <option value="">S√©lectionnez une couleur</option>
                                <option value="vert">üü¢ Vert</option>
                                <option value="blanc">‚ö™ Blanc</option>
                                <option value="mixte">üåà Mixte</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productPrice"><i class="fas fa-money-bill"></i> Prix de base (FCFA) *</label>
                            <input type="number" id="productPrice" name="productPrice" placeholder="7500" required min="0" step="100">
                        </div>
                        
                        <div class="form-group">
                            <label for="productFlocage"><i class="fas fa-font"></i> Flocage disponible</label>
                            <select id="productFlocage" name="productFlocage">
                                <option value="true">‚úÖ Oui</option>
                                <option value="false">‚ùå Non</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productFlocagePrice"><i class="fas fa-money-bill-wave"></i> Prix avec flocage (FCFA)</label>
                            <input type="number" id="productFlocagePrice" name="productFlocagePrice" placeholder="10000" min="0" step="100">
                        </div>
                        
                        <div class="form-group">
                            <label for="productSizes"><i class="fas fa-ruler"></i> Tailles disponibles *</label>
                            <div class="checkbox-group">
                                <input type="checkbox" name="size" value="XS" id="sizeXS" style="display: none;">
                                <label for="sizeXS">XS</label>
                                <input type="checkbox" name="size" value="S" id="sizeS" style="display: none;">
                                <label for="sizeS">S</label>
                                <input type="checkbox" name="size" value="M" id="sizeM" style="display: none;">
                                <label for="sizeM">M</label>
                                <input type="checkbox" name="size" value="L" id="sizeL" style="display: none;">
                                <label for="sizeL">L</label>
                                <input type="checkbox" name="size" value="XL" id="sizeXL" style="display: none;">
                                <label for="sizeXL">XL</label>
                                <input type="checkbox" name="size" value="XXL" id="sizeXXL" style="display: none;">
                                <label for="sizeXXL">XXL</label>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="productDescription"><i class="fas fa-align-left"></i> Description</label>
                            <textarea id="productDescription" name="productDescription" placeholder="Description d√©taill√©e du produit..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="productImage"><i class="fas fa-image"></i> URL de l'image</label>
                            <input type="text" id="productImage" name="productImage" placeholder="https://exemple.com/image.jpg">
                        </div>
                        
                        <div class="form-group">
                            <label for="productStock"><i class="fas fa-boxes"></i> Stock initial</label>
                            <input type="number" id="productStock" name="productStock" value="10" min="0">
                        </div>
                        
                        <div class="form-group full-width">
                            <button type="submit" class="btn btn-secondary">
                                <i class="fas fa-plus-circle"></i> Ajouter le produit
                            </button>
                            <button type="button" class="btn" onclick="syncProductsFromCatalogue()">
                                <i class="fas fa-download"></i> Importer du catalogue
                            </button>
                        </div>
                    </form>
                </div>

                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-list"></i> Liste des Produits</h2>
                    <div class="search-box">
                        <input type="text" id="productSearch" placeholder="Rechercher un produit par nom, cat√©gorie...">
                        <span class="search-icon"><i class="fas fa-search"></i></span>
                    </div>
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th><i class="fas fa-image"></i> Image</th>
                                <th><i class="fas fa-tag"></i> Nom</th>
                                <th><i class="fas fa-list"></i> Cat√©gorie</th>
                                <th><i class="fas fa-money-bill"></i> Prix</th>
                                <th><i class="fas fa-boxes"></i> Stock</th>
                                <th><i class="fas fa-cogs"></i> Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsList">
                            <!-- Produits g√©n√©r√©s dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Onglet Commandes -->
            <div class="tab-content" id="orders-tab">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-clipboard-list"></i> Toutes les Commandes</h2>
                    <div class="search-box">
                        <input type="text" id="orderSearch" placeholder="Rechercher par ID, nom client...">
                        <span class="search-icon"><i class="fas fa-search"></i></span>
                    </div>
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th><i class="fas fa-id-badge"></i> ID</th>
                                <th><i class="far fa-calendar"></i> Date</th>
                                <th><i class="fas fa-user"></i> Client</th>
                                <th><i class="fas fa-money-bill-wave"></i> Montant</th>
                                <th><i class="fas fa-info-circle"></i> Statut</th>
                                <th><i class="fas fa-cogs"></i> Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersList">
                            <!-- Commandes g√©n√©r√©es dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Onglet Statistiques -->
            <div class="tab-content" id="stats-tab">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-chart-line"></i> Statistiques D√©taill√©es</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="statsProducts">0</div>
                            <div class="stat-label">Produits en vente</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsMaillots">0</div>
                            <div class="stat-label">Maillots vendus</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsBlousons">0</div>
                            <div class="stat-label">Blousons vendus</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statsAvgOrder">0 FCFA</div>
                            <div class="stat-label">Panier moyen</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h3 class="section-title" style="font-size: 1.5rem;">
                            <i class="fas fa-trophy"></i> Top 5 Produits
                        </h3>
                        <div id="popularProducts" style="margin-top: 20px;">
                            <!-- G√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Synchronisation -->
            <div class="tab-content" id="sync-tab">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-sync-alt"></i> Synchronisation des Donn√©es</h2>
                    
                    <div class="sync-section">
                        <h3><i class="fas fa-info-circle"></i> √âtat de la Synchronisation</h3>
                        <div class="sync-status">
                            <p><strong><i class="far fa-clock"></i> Derni√®re synchronisation:</strong> <span id="lastSyncTime">Jamais</span></p>
                            <p><strong><i class="fas fa-tshirt"></i> Produits synchronis√©s:</strong> <span id="syncProductsCount">0</span></p>
                            <p><strong><i class="fas fa-shopping-cart"></i> Commandes synchronis√©es:</strong> <span id="syncOrdersCount">0</span></p>
                        </div>
                    </div>
                    
                    <div class="sync-section">
                        <h3><i class="fas fa-cogs"></i> Actions de Synchronisation</h3>
                        <div class="sync-buttons">
                            <button class="btn btn-success" onclick="syncAllData()">
                                <i class="fas fa-sync-alt"></i> Synchroniser toutes les donn√©es
                            </button>
                            <button class="btn" onclick="syncProductsFromCatalogue()">
                                <i class="fas fa-tshirt"></i> Synchroniser les produits
                            </button>
                            <button class="btn" onclick="syncOrdersFromStorage()">
                                <i class="fas fa-clipboard-list"></i> Synchroniser les commandes
                            </button>
                            <button class="btn btn-warning" onclick="exportData()">
                                <i class="fas fa-download"></i> Exporter les donn√©es
                            </button>
                            <button class="btn btn-danger" onclick="clearAllData()">
                                <i class="fas fa-trash-alt"></i> Effacer toutes les donn√©es
                            </button>
                        </div>
                    </div>
                    
                    <div class="sync-section">
                        <h3><i class="fas fa-bell"></i> Notifications</h3>
                        <div style="margin-top: 15px;">
                            <label style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--white); border-radius: var(--border-radius); margin-bottom: 10px;">
                                <input type="checkbox" id="notifyNewOrders" checked style="transform: scale(1.2);">
                                <span><i class="fas fa-shopping-cart"></i> Notifier les nouvelles commandes</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--white); border-radius: var(--border-radius);">
                                <input type="checkbox" id="notifyLowStock" checked style="transform: scale(1.2);">
                                <span><i class="fas fa-exclamation-triangle"></i> Notifier les stocks bas</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal D√©tails Commande -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <h2 class="modal-title">üìã D√©tails de la Commande</h2>
            <div id="orderDetails">
                <!-- D√©tails g√©n√©r√©s dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Modal D√©tails Produit -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="modal-close" id="productModalClose">&times;</button>
            <h2 class="modal-title">‚úèÔ∏è Modifier le Produit</h2>
            <form id="editProductForm">
                <!-- Formulaire g√©n√©r√© dynamiquement -->
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-tshirt"></i> Maillots & Blousons S√©n√©gal</h3>
                    <p>Votre boutique officielle de maillots et blousons du S√©n√©gal. Qualit√© premium, service exceptionnel.</p>
                </div>
                <div class="footer-section">
                    <h3><i class="fas fa-cogs"></i> Administration</h3>
                    <p>Panel d'administration pour g√©rer produits, commandes et statistiques.</p>
                </div>
                <div class="footer-section">
                    <h3><i class="fas fa-shield-alt"></i> S√©curit√©</h3>
                    <p>Interface s√©curis√©e. Toutes les actions sont enregistr√©es et tra√ßables.</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Maillots & Blousons S√©n√©gal. Tous droits r√©serv√©s.</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">Interface Administrateur v2.0 - Syst√®me de gestion footeux</p>
            </div>
        </div>
    </footer>

    <script>
        // Base de donn√©es des produits du catalogue
        const catalogueProducts = [
            {
                id: "maillot-vert",
                name: "Maillot S√©n√©gal Vert 2023",
                category: "maillot",
                price: 7500,
                priceWithFlocage: 10000,
                color: "vert",
                sizes: ["S", "M", "L", "XL", "XXL"],
                image: "https://via.placeholder.com/300x300/00853f/ffffff?text=Maillot+Vert",
                hasFlocage: true,
                isNew: true,
                stock: 15,
                sold: 42
            },
            {
                id: "maillot-blanc",
                name: "Maillot S√©n√©gal Blanc 2023",
                category: "maillot",
                price: 7500,
                priceWithFlocage: 10000,
                color: "blanc",
                sizes: ["S", "M", "L", "XL"],
                image: "https://via.placeholder.com/300x300/ffffff/000000?text=Maillot+Blanc",
                hasFlocage: true,
                isNew: false,
                stock: 10,
                sold: 28
            },
            {
                id: "blouson-vert",
                name: "Blouson S√©n√©gal Premium Vert",
                category: "blouson",
                price: 12000,
                color: "vert",
                sizes: ["M", "L", "XL", "XXL"],
                image: "https://via.placeholder.com/300x300/00853f/ffffff?text=Blouson+Vert",
                hasFlocage: false,
                isNew: true,
                stock: 8,
                sold: 15
            },
            {
                id: "maillot-mixte",
                name: "Maillot √âdition Sp√©ciale",
                category: "maillot",
                price: 8500,
                priceWithFlocage: 11500,
                color: "mixte",
                sizes: ["XS", "S", "M", "L", "XL"],
                image: "https://via.placeholder.com/300x300/00853f/fdef05?text=√âdition+Sp√©ciale",
                hasFlocage: true,
                isNew: true,
                stock: 12,
                sold: 37
            }
        ];

        // Donn√©es initiales
        let products = JSON.parse(localStorage.getItem('adminProducts')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let notifications = JSON.parse(localStorage.getItem('adminNotifications')) || {};

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Mettre √† jour la derni√®re connexion
            updateLastLogin();
            
            // Synchroniser les produits du catalogue
            syncProductsFromCatalogue();
            
            // Synchroniser les commandes du localStorage
            syncOrdersFromStorage();
            
            // Mettre √† jour l'affichage
            updateStats();
            displayProducts();
            displayOrders();
            setupEventListeners();
            
            // V√©rifier les notifications
            checkNotifications();
            
            // Animation d'entr√©e
            document.querySelectorAll('.animate-entry').forEach((el, i) => {
                el.style.animationDelay = `${i * 0.1}s`;
            });
        });

        // Mettre √† jour la derni√®re connexion
        function updateLastLogin() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('lastLogin').textContent = now.toLocaleDateString('fr-FR', options);
        }

        // Synchroniser les produits depuis le catalogue
        function syncProductsFromCatalogue() {
            let newProductsCount = 0;
            
            catalogueProducts.forEach(catalogueProduct => {
                const exists = products.some(product => product.id === catalogueProduct.id);
                if (!exists) {
                    products.push({...catalogueProduct});
                    newProductsCount++;
                }
            });
            
            if (newProductsCount > 0) {
                localStorage.setItem('adminProducts', JSON.stringify(products));
                showNotification(`‚úÖ ${newProductsCount} nouveau(x) produit(s) import√©(s) depuis le catalogue`, 'success');
            } else if (products.length === 0) {
                products = [...catalogueProducts];
                localStorage.setItem('adminProducts', JSON.stringify(products));
                showNotification('üì¶ Catalogue import√© avec succ√®s', 'success');
            } else {
                showNotification('üìä Catalogue d√©j√† √† jour', 'warning');
            }
            
            updateStats();
            displayProducts();
            updateSyncStatus();
            
            return products.length;
        }

        // Synchroniser les commandes depuis le localStorage
        function syncOrdersFromStorage() {
            const allOrders = [];
            
            // Commandes depuis currentOrder
            const currentOrder = JSON.parse(localStorage.getItem('currentOrder'));
            if (currentOrder && !currentOrder.deliveryLocked) {
                allOrders.push(currentOrder);
            }
            
            // Commandes depuis orders
            const storedOrders = JSON.parse(localStorage.getItem('orders')) || [];
            storedOrders.forEach(order => {
                const exists = allOrders.some(o => o.id === order.id);
                if (!exists) {
                    allOrders.push(order);
                }
            });
            
            // Commandes depuis le panier
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length > 0) {
                const cartOrder = {
                    id: 'PANIER-' + Date.now(),
                    date: new Date().toISOString(),
                    status: 'panier',
                    customer: { firstName: 'Client', lastName: 'En cours' },
                    items: cart,
                    total: calculateCartTotal(cart),
                    payment: { method: 'non-d√©fini' },
                    shipping: { address: 'Non sp√©cifi√©' }
                };
                allOrders.push(cartOrder);
            }
            
            orders = allOrders;
            localStorage.setItem('orders', JSON.stringify(orders));
            
            updateStats();
            displayOrders();
            checkNewOrders();
            updateSyncStatus();
            
            return orders.length;
        }

        // Calculer le total du panier
        function calculateCartTotal(cartItems) {
            const total = cartItems.reduce((sum, item) => {
                return sum + (item.unitPrice * (item.quantity || 1));
            }, 0);
            return total.toLocaleString() + ' FCFA';
        }

        // Synchroniser toutes les donn√©es
        function syncAllData() {
            const productsCount = syncProductsFromCatalogue();
            const ordersCount = syncOrdersFromStorage();
            
            showNotification(`üîÑ Synchronisation termin√©e: ${productsCount} produits, ${ordersCount} commandes`, 'success');
            updateSyncStatus();
        }

        // Mettre √† jour le statut de synchronisation
        function updateSyncStatus() {
            const now = new Date();
            const options = { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('lastSyncTime').textContent = now.toLocaleTimeString('fr-FR', options);
            document.getElementById('syncProductsCount').textContent = products.length;
            document.getElementById('syncOrdersCount').textContent = orders.filter(o => o.status !== 'panier').length;
        }

        // V√©rifier les nouvelles commandes
        function checkNewOrders() {
            const notifyNewOrders = document.getElementById('notifyNewOrders').checked;
            
            if (!notifyNewOrders) return;
            
            const pendingOrders = orders.filter(order => 
                order.status === 'pending' && 
                !order.notified
            );
            
            if (pendingOrders.length > 0) {
                showNotification(`üì• ${pendingOrders.length} nouvelle(s) commande(s) en attente!`, 'warning');
                
                // Marquer comme notifi√©
                pendingOrders.forEach(order => {
                    order.notified = true;
                });
                localStorage.setItem('orders', JSON.stringify(orders));
            }
        }

        // V√©rifier les notifications
        function checkNotifications() {
            const notifyLowStock = document.getElementById('notifyLowStock')?.checked || true;
            
            if (notifyLowStock) {
                const lowStockProducts = products.filter(product => product.stock < 5);
                if (lowStockProducts.length > 0) {
                    showNotification(`‚ö†Ô∏è ${lowStockProducts.length} produit(s) avec stock bas`, 'warning');
                }
            }
        }

        // Afficher une notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = 'notification ' + type;
            notification.style.display = 'flex';
            
            // Auto-hide apr√®s 5 secondes
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }

        function hideNotification() {
            document.getElementById('notification').style.display = 'none';
        }

        // Mise √† jour des statistiques
        function updateStats() {
            // Produits
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('statsProducts').textContent = products.length;
            
            // Commandes (exclure les paniers)
            const realOrders = orders.filter(order => order.status !== 'panier');
            const totalOrders = realOrders.length;
            const pendingOrders = realOrders.filter(order => order.status === 'pending').length;
            
            // Calculer les statistiques
            let maillotsSold = 0;
            let blousonsSold = 0;
            let totalRevenue = 0;
            let orderCount = 0;
            
            realOrders.forEach(order => {
                if (order.status === 'delivered' || order.status === 'shipped') {
                    orderCount++;
                    
                    // Calculer le revenu
                    if (order.total) {
                        const totalMatch = order.total.toString().match(/([\d,]+)/);
                        if (totalMatch) {
                            const cleanTotal = totalMatch[1].replace(/,/g, '');
                            totalRevenue += parseInt(cleanTotal) || 0;
                        }
                    }
                    
                    // Compter les produits
                    if (order.items) {
                        order.items.forEach(item => {
                            if (item.category === 'maillot' || item.name?.toLowerCase().includes('maillot')) {
                                maillotsSold += item.quantity || 1;
                            } else if (item.category === 'blouson' || item.name?.toLowerCase().includes('blouson')) {
                                blousonsSold += item.quantity || 1;
                            }
                        });
                    }
                }
            });
            
            // Panier moyen
            const avgOrder = orderCount > 0 ? Math.round(totalRevenue / orderCount) : 0;
            
            // Mettre √† jour l'affichage
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('pendingOrders').textContent = pendingOrders;
            document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + ' FCFA';
            document.getElementById('statsMaillots').textContent = maillotsSold;
            document.getElementById('statsBlousons').textContent = blousonsSold;
            document.getElementById('statsAvgOrder').textContent = avgOrder.toLocaleString() + ' FCFA';
            
            // Mettre √† jour les produits populaires
            updatePopularProducts();
        }

        // Mettre √† jour les produits populaires
        function updatePopularProducts() {
            const popularProductsDiv = document.getElementById('popularProducts');
            const salesCount = {};
            
            // Calculer les ventes √† partir des produits (propri√©t√© sold)
            products.forEach(product => {
                if (product.sold) {
                    salesCount[product.id] = product.sold;
                }
            });
            
            // Trier par ventes
            const sortedProducts = Object.entries(salesCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedProducts.length > 0) {
                let html = '';
                sortedProducts.forEach(([productId, sales], index) => {
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        const rankColors = [
                            'linear-gradient(135deg, #ffd700, #ffed4e)', // Or
                            'linear-gradient(135deg, #c0c0c0, #e0e0e0)', // Argent
                            'linear-gradient(135deg, #cd7f32, #e3965e)', // Bronze
                            'linear-gradient(135deg, #00853f, #2e8b57)', // Vert
                            'linear-gradient(135deg, #00853f, #2e8b57)'  // Vert
                        ];
                        
                        html += `
                            <div class="popular-product-card">
                                <div class="popular-product-rank" style="background: ${rankColors[index] || rankColors[3]}">
                                    ${index + 1}
                                </div>
                                <div style="flex: 1;">
                                    <h4 style="color: var(--primary-green); margin-bottom: 5px;">${product.name}</h4>
                                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 5px;">
                                        ${product.category === 'maillot' ? '‚öΩ Maillot' : 'üß• Blouson'} ‚Ä¢ ${product.color}
                                    </p>
                                    <p style="color: var(--accent-red); font-weight: bold; font-size: 1.1rem;">
                                        ${sales} vente${sales > 1 ? 's' : ''}
                                    </p>
                                </div>
                                <div>
                                    <img src="${product.image || 'https://via.placeholder.com/60x60'}" 
                                         alt="${product.name}" 
                                         style="width: 60px; height: 60px; border-radius: var(--border-radius); border: 2px solid var(--primary-green);">
                                </div>
                            </div>
                        `;
                    }
                });
                popularProductsDiv.innerHTML = html;
            } else {
                popularProductsDiv.innerHTML = `
                    <div style="text-align: center; padding: 40px; background: var(--light-gray); border-radius: var(--border-radius);">
                        <i class="fas fa-chart-line" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i>
                        <p style="color: #666;">Aucune donn√©e de vente disponible</p>
                    </div>
                `;
            }
        }

        // Afficher les produits
        function displayProducts(filter = '') {
            const productsList = document.getElementById('productsList');
            let filteredProducts = products;
            
            if (filter) {
                const searchTerm = filter.toLowerCase();
                filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm) ||
                    (product.color && product.color.toLowerCase().includes(searchTerm)) ||
                    product.price.toString().includes(searchTerm)
                );
            }
            
            productsList.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" style="text-align: center; padding: 40px;">
                        <i class="fas fa-search" style="font-size: 2rem; color: #ccc; margin-bottom: 10px; display: block;"></i>
                        <p style="color: #666;">Aucun produit trouv√©</p>
                    </td>
                `;
                productsList.appendChild(row);
                return;
            }
            
            filteredProducts.forEach((product, index) => {
                const row = document.createElement('tr');
                const stockColor = product.stock < 3 ? 'var(--accent-red)' : 
                                 product.stock < 10 ? 'var(--secondary-yellow)' : 
                                 'var(--primary-green)';
                
                row.innerHTML = `
                    <td>
                        <img src="${product.image || 'https://via.placeholder.com/70x70'}" 
                             alt="${product.name}" 
                             class="product-image-small"
                             onerror="this.src='https://via.placeholder.com/70x70'">
                    </td>
                    <td>
                        <strong>${product.name}</strong><br>
                        <small style="color: #666;">${product.sizes ? product.sizes.join(', ') : ''}</small>
                    </td>
                    <td>
                        <span style="display: inline-block; padding: 4px 8px; background: ${product.category === 'maillot' ? 'rgba(0, 133, 63, 0.1)' : 'rgba(253, 239, 5, 0.1)'}; border-radius: 4px;">
                            ${product.category === 'maillot' ? '‚öΩ Maillot' : 'üß• Blouson'}
                        </span>
                    </td>
                    <td>
                        <strong>${product.price.toLocaleString()} FCFA</strong>
                        ${product.hasFlocage ? `<br><small>Avec flocage: ${(product.priceWithFlocage || product.price).toLocaleString()} FCFA</small>` : ''}
                    </td>
                    <td>
                        <span style="color: ${stockColor}; font-weight: bold; font-size: 1.1rem;">
                            ${product.stock || 0}
                        </span>
                    </td>
                    <td class="product-actions">
                        <button class="btn btn-sm btn-warning" onclick="editProduct(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteProduct(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                productsList.appendChild(row);
            });
        }

        // Afficher les commandes
        function displayOrders(filter = '') {
            const ordersList = document.getElementById('ordersList');
            let filteredOrders = orders.filter(order => order.status !== 'panier');
            
            if (filter) {
                const searchTerm = filter.toLowerCase();
                filteredOrders = filteredOrders.filter(order => 
                    (order.id && order.id.toLowerCase().includes(searchTerm)) ||
                    (order.customer?.firstName && order.customer.firstName.toLowerCase().includes(searchTerm)) ||
                    (order.customer?.lastName && order.customer.lastName.toLowerCase().includes(searchTerm)) ||
                    (order.customer?.email && order.customer.email.toLowerCase().includes(searchTerm)) ||
                    (order.total && order.total.toString().toLowerCase().includes(searchTerm)) ||
                    getStatusText(order.status).toLowerCase().includes(searchTerm)
                );
            }
            
            ordersList.innerHTML = '';
            
            if (filteredOrders.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" style="text-align: center; padding: 40px;">
                        <i class="fas fa-clipboard-list" style="font-size: 2rem; color: #ccc; margin-bottom: 10px; display: block;"></i>
                        <p style="color: #666;">Aucune commande trouv√©e</p>
                    </td>
                `;
                ordersList.appendChild(row);
                return;
            }
            
            filteredOrders.forEach((order, index) => {
                const row = document.createElement('tr');
                const isLocked = order.deliveryLocked || order.status === 'delivered';
                const statusClass = isLocked ? 'status-locked' : `status-${order.status || 'pending'}`;
                
                row.innerHTML = `
                    <td>
                        <code style="background: rgba(0, 133, 63, 0.1); padding: 4px 8px; border-radius: 4px;">
                            ${order.id?.substring(0, 8) || 'N/A'}
                        </code>
                    </td>
                    <td>${order.date ? new Date(order.date).toLocaleDateString('fr-FR') : 'N/A'}</td>
                    <td>
                        <strong>${order.customer?.firstName || ''} ${order.customer?.lastName || ''}</strong>
                        ${order.customer?.email ? `<br><small>${order.customer.email}</small>` : ''}
                    </td>
                    <td><strong>${order.total || '0 FCFA'}</strong></td>
                    <td>
                        <span class="status-badge ${statusClass}">
                            ${isLocked ? 'üîí ' : ''}${getStatusText(order.status)}
                        </span>
                    </td>
                    <td class="order-actions">
                        <button class="btn btn-sm" onclick="viewOrder(${index})">
                            <i class="fas fa-eye"></i>
                        </button>
                        ${!isLocked && order.status === 'pending' ? `
                        <button class="btn btn-sm btn-success" onclick="updateOrderStatus(${index}, 'confirmed')">
                            <i class="fas fa-check"></i>
                        </button>
                        ` : ''}
                    </td>
                `;
                ordersList.appendChild(row);
            });
        }

        // Obtenir le texte du statut
        function getStatusText(status) {
            const statusMap = {
                'pending': '‚è≥ En attente',
                'confirmed': '‚úÖ Confirm√©e',
                'shipped': 'üöö Exp√©di√©e',
                'delivered': 'üéØ Livr√©e',
                'cancelled': '‚ùå Annul√©e',
                'panier': 'üõí Panier'
            };
            return statusMap[status] || '‚è≥ En attente';
        }

        // Ajouter un produit
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const selectedSizes = [];
            document.querySelectorAll('input[name="size"]:checked').forEach(checkbox => {
                selectedSizes.push(checkbox.value);
            });
            
            if (selectedSizes.length === 0) {
                showNotification('Veuillez s√©lectionner au moins une taille', 'error');
                return;
            }
            
            const newProduct = {
                id: 'PROD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                name: formData.get('productName'),
                category: formData.get('productCategory'),
                color: formData.get('productColor'),
                price: parseInt(formData.get('productPrice')) || 0,
                hasFlocage: formData.get('productFlocage') === 'true',
                priceWithFlocage: formData.get('productFlocagePrice') ? parseInt(formData.get('productFlocagePrice')) : null,
                sizes: selectedSizes,
                description: formData.get('productDescription'),
                image: formData.get('productImage') || `https://via.placeholder.com/300x300/${formData.get('productColor') === 'vert' ? '00853f' : 'ffffff'}/ffffff?text=${encodeURIComponent(formData.get('productName'))}`,
                stock: parseInt(formData.get('productStock')) || 10,
                sold: 0,
                createdAt: new Date().toISOString()
            };
            
            products.push(newProduct);
            localStorage.setItem('adminProducts', JSON.stringify(products));
            
            showNotification(`‚úÖ Produit "${newProduct.name}" ajout√© avec succ√®s !`, 'success');
            this.reset();
            updateStats();
            displayProducts();
        });

        // Modifier un produit
        function editProduct(index) {
            const product = products[index];
            const modal = document.getElementById('productModal');
            const form = document.getElementById('editProductForm');
            
            let sizesHTML = '';
            const availableSizes = ['XS', 'S', 'M', 'L', 'XL', 'XXL'];
            availableSizes.forEach(size => {
                const checked = product.sizes?.includes(size) ? 'checked' : '';
                sizesHTML += `
                    <input type="checkbox" name="editSize" value="${size}" id="editSize${size}" ${checked} style="display: none;">
                    <label for="editSize${size}" style="display: inline-flex; align-items: center; gap: 5px; margin-right: 10px; margin-bottom: 10px; padding: 8px 12px; background: ${checked ? 'var(--primary-green)' : 'var(--white)'}; color: ${checked ? 'var(--white)' : 'var(--dark-gray)'}; border: 2px solid #ddd; border-radius: var(--border-radius); cursor: pointer;">
                        ${size}
                    </label>
                `;
            });
            
            form.innerHTML = `
                <div class="product-form">
                    <input type="hidden" id="editIndex" value="${index}">
                    <div class="form-group">
                        <label for="editName"><i class="fas fa-tag"></i> Nom du produit</label>
                        <input type="text" id="editName" value="${product.name}" required>
                    </div>
                    <div class="form-group">
                        <label for="editCategory"><i class="fas fa-list"></i> Cat√©gorie</label>
                        <select id="editCategory" required>
                            <option value="maillot" ${product.category === 'maillot' ? 'selected' : ''}>‚öΩ Maillot</option>
                            <option value="blouson" ${product.category === 'blouson' ? 'selected' : ''}>üß• Blouson</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPrice"><i class="fas fa-money-bill"></i> Prix (FCFA)</label>
                        <input type="number" id="editPrice" value="${product.price}" required min="0" step="100">
                    </div>
                    <div class="form-group">
                        <label for="editFlocagePrice"><i class="fas fa-font"></i> Prix avec flocage (FCFA)</label>
                        <input type="number" id="editFlocagePrice" value="${product.priceWithFlocage || ''}" min="0" step="100">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-ruler"></i> Tailles disponibles</label>
                        <div>${sizesHTML}</div>
                    </div>
                    <div class="form-group">
                        <label for="editStock"><i class="fas fa-boxes"></i> Stock</label>
                        <input type="number" id="editStock" value="${product.stock || 10}" required min="0">
                    </div>
                    <div class="form-group">
                        <label for="editImage"><i class="fas fa-image"></i> Image URL</label>
                        <input type="text" id="editImage" value="${product.image || ''}">
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="btn btn-secondary">
                            <i class="fas fa-save"></i> Enregistrer
                        </button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'flex';
            
            // Ajouter l'√©v√©nement submit
            form.onsubmit = function(e) {
                e.preventDefault();
                
                const selectedSizes = [];
                document.querySelectorAll('input[name="editSize"]:checked').forEach(checkbox => {
                    selectedSizes.push(checkbox.value);
                });
                
                if (selectedSizes.length === 0) {
                    showNotification('Veuillez s√©lectionner au moins une taille', 'error');
                    return;
                }
                
                products[index].name = document.getElementById('editName').value;
                products[index].category = document.getElementById('editCategory').value;
                products[index].price = parseInt(document.getElementById('editPrice').value) || 0;
                products[index].priceWithFlocage = document.getElementById('editFlocagePrice').value ? 
                    parseInt(document.getElementById('editFlocagePrice').value) : null;
                products[index].sizes = selectedSizes;
                products[index].stock = parseInt(document.getElementById('editStock').value) || 0;
                products[index].image = document.getElementById('editImage').value;
                
                localStorage.setItem('adminProducts', JSON.stringify(products));
                modal.style.display = 'none';
                updateStats();
                displayProducts();
                showNotification(`‚úÖ Produit "${products[index].name}" modifi√© avec succ√®s !`, 'success');
            };
        }

        // Supprimer un produit
        function deleteProduct(index) {
            if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir supprimer ce produit ? Cette action est irr√©versible.')) {
                const productName = products[index].name;
                products.splice(index, 1);
                localStorage.setItem('adminProducts', JSON.stringify(products));
                updateStats();
                displayProducts();
                showNotification(`üóëÔ∏è Produit "${productName}" supprim√© avec succ√®s !`, 'success');
            }
        }

        // Voir les d√©tails d'une commande
        function viewOrder(index) {
            const order = orders[index];
            const modal = document.getElementById('orderModal');
            const details = document.getElementById('orderDetails');
            
            const isLocked = order.deliveryLocked || order.status === 'delivered';
            
            let itemsHTML = '<h3 style="color: var(--primary-green); margin-bottom: 15px;"><i class="fas fa-shopping-basket"></i> Articles command√©s:</h3>';
            if (order.items && order.items.length > 0) {
                itemsHTML += '<div style="max-height: 300px; overflow-y: auto;">';
                order.items.forEach((item, i) => {
                    itemsHTML += `
                        <div style="padding: 15px; background: ${i % 2 === 0 ? 'var(--light-gray)' : 'var(--white)'}; border-radius: var(--border-radius); margin-bottom: 10px; border-left: 4px solid var(--primary-green);">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <strong style="color: var(--primary-green);">${item.name}</strong><br>
                                    <small style="color: #666;">Quantit√©: ${item.quantity || 1} √ó ${item.unitPrice?.toLocaleString() || '0'} FCFA</small><br>
                                    ${item.color ? `<small style="color: #666;">Couleur: ${item.color}</small><br>` : ''}
                                    ${item.size ? `<small style="color: #666;">Taille: ${item.size}</small><br>` : ''}
                                    ${item.flocage === 'avec' && item.personalization ? `
                                    <small style="color: #666;">
                                        Personnalisation: ${item.personalization.name || ''} ${item.personalization.number || ''}
                                    </small>
                                    ` : ''}
                                </div>
                                <div style="font-weight: bold; color: var(--accent-red);">
                                    ${(item.unitPrice * (item.quantity || 1)).toLocaleString()} FCFA
                                </div>
                            </div>
                        </div>
                    `;
                });
                itemsHTML += '</div>';
            } else {
                itemsHTML += '<p style="color: #666; text-align: center; padding: 20px;">Aucun article</p>';
            }
            
            // Informations de livraison si disponible
            let deliveryInfo = '';
            if (order.deliveryDate) {
                deliveryInfo = `
                    <div style="margin-bottom: 20px; padding: 15px; background: linear-gradient(135deg, #d4edda, #c3e6cb); border-radius: var(--border-radius); border: 2px solid #28a745;">
                        <p style="color: #155724; font-weight: bold; margin-bottom: 5px;">
                            <i class="fas fa-check-circle"></i> Commande livr√©e
                        </p>
                        <p style="color: #155724; margin: 0;">
                            <strong>Date de livraison:</strong> ${new Date(order.deliveryDate).toLocaleString('fr-FR')}<br>
                            <em>Cette commande est termin√©e et ne peut plus √™tre modifi√©e</em>
                        </p>
                    </div>
                `;
            }
            
            details.innerHTML = `
                ${deliveryInfo}
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="padding: 15px; background: var(--light-gray); border-radius: var(--border-radius);">
                        <p><strong><i class="fas fa-id-badge"></i> ID Commande:</strong><br>
                        <code style="background: rgba(0, 133, 63, 0.1); padding: 4px 8px; border-radius: 4px; display: inline-block; margin-top: 5px;">
                            ${order.id || 'N/A'}
                        </code></p>
                    </div>
                    <div style="padding: 15px; background: var(--light-gray); border-radius: var(--border-radius);">
                        <p><strong><i class="far fa-calendar"></i> Date de commande:</strong><br>
                        <span style="color: #666; margin-top: 5px; display: block;">
                            ${order.date ? new Date(order.date).toLocaleString('fr-FR') : 'N/A'}
                        </span></p>
                    </div>
                    <div style="padding: 15px; background: var(--light-gray); border-radius: var(--border-radius);">
                        <p><strong><i class="fas fa-info-circle"></i> Statut:</strong><br>
                        <span class="status-badge ${isLocked ? 'status-locked' : `status-${order.status || 'pending'}`}" style="margin-top: 5px;">
                            ${isLocked ? 'üîí ' : ''}${getStatusText(order.status)}
                        </span></p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="padding: 20px; background: var(--white); border-radius: var(--border-radius); border: 2px solid var(--primary-green);">
                        <h4 style="color: var(--primary-green); margin-bottom: 15px;"><i class="fas fa-user"></i> Informations client</h4>
                        <p><strong>Nom:</strong> ${order.customer?.firstName || ''} ${order.customer?.lastName || ''}</p>
                        <p><strong>Email:</strong> ${order.customer?.email || 'N/A'}</p>
                        <p><strong>T√©l√©phone:</strong> ${order.customer?.phone || 'N/A'}</p>
                    </div>
                    
                    ${order.shipping ? `
                    <div style="padding: 20px; background: var(--white); border-radius: var(--border-radius); border: 2px solid var(--secondary-yellow);">
                        <h4 style="color: var(--primary-green); margin-bottom: 15px;"><i class="fas fa-truck"></i> Livraison</h4>
                        <p>${order.shipping.address || 'N/A'}<br>
                        ${order.shipping.city || ''}, ${order.shipping.postalCode || ''}<br>
                        ${order.shipping.country || ''}</p>
                        ${order.shipping.instructions ? `<p><strong>Instructions:</strong><br>${order.shipping.instructions}</p>` : ''}
                    </div>
                    ` : ''}
                    
                    <div style="padding: 20px; background: var(--white); border-radius: var(--border-radius); border: 2px solid var(--accent-red);">
                        <h4 style="color: var(--primary-green); margin-bottom: 15px;"><i class="fas fa-credit-card"></i> Paiement</h4>
                        <p><strong>M√©thode:</strong> ${getPaymentMethodText(order.payment?.method)}</p>
                        <p><strong>Total:</strong> <span style="font-size: 1.2rem; font-weight: bold; color: var(--accent-red);">${order.total || '0 FCFA'}</span></p>
                    </div>
                </div>
                
                ${itemsHTML}
                
                ${!isLocked && order.status !== 'panier' ? `
                <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid var(--secondary-yellow);">
                    <h3 style="color: var(--primary-green); margin-bottom: 20px;"><i class="fas fa-cogs"></i> Actions</h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        ${order.status === 'pending' ? `
                        <button class="btn btn-success" onclick="updateOrderStatus(${index}, 'confirmed')">
                            <i class="fas fa-check-circle"></i> Confirmer la commande
                        </button>
                        ` : ''}
                        ${order.status === 'confirmed' ? `
                        <button class="btn btn-secondary" onclick="updateOrderStatus(${index}, 'shipped')">
                            <i class="fas fa-shipping-fast"></i> Marquer comme exp√©di√©e
                        </button>
                        ` : ''}
                        ${order.status === 'shipped' ? `
                        <button class="btn btn-secondary" onclick="confirmDelivery(${index})">
                            <i class="fas fa-check-double"></i> Marquer comme livr√©e
                        </button>
                        ` : ''}
                        ${order.status !== 'cancelled' && order.status !== 'delivered' ? `
                        <button class="btn btn-danger" onclick="updateOrderStatus(${index}, 'cancelled')">
                            <i class="fas fa-times-circle"></i> Annuler
                        </button>
                        ` : ''}
                    </div>
                </div>
                ` : isLocked ? `
                <div style="margin-top: 40px; padding: 20px; background: linear-gradient(135deg, #6c757d, #495057); color: var(--white); border-radius: var(--border-radius); text-align: center;">
                    <h3><i class="fas fa-lock"></i> Commande termin√©e</h3>
                    <p>Cette commande a √©t√© livr√©e et ne peut plus √™tre modifi√©e.</p>
                </div>
                ` : ''}
            `;
            
            modal.style.display = 'flex';
        }

        // Obtenir le texte de la m√©thode de paiement
        function getPaymentMethodText(method) {
            const methodMap = {
                'wave': 'üì± Wave',
                'orange-money': 'üü† Orange Money',
                'free-money': 'üü¢ Free Money',
                'especes': 'üíµ Paiement √† la livraison'
            };
            return methodMap[method] || method || 'Non sp√©cifi√©';
        }

        // Mettre √† jour le statut d'une commande (GESTION DES LIVRAISONS)
        function updateOrderStatus(index, newStatus) {
            const order = orders[index];
            
            // Emp√™cher la modification si la commande est d√©j√† livr√©e et verrouill√©e
            if (order.deliveryLocked || order.status === 'delivered') {
                showNotification('‚ùå Cette commande est d√©j√† livr√©e et ne peut plus √™tre modifi√©e', 'error');
                return;
            }
            
            // Demander confirmation pour la livraison
            if (newStatus === 'delivered') {
                if (!confirm('üöö √ätes-vous s√ªr de vouloir marquer cette commande comme livr√©e ? Cette action est IRR√âVERSIBLE.')) {
                    return;
                }
            }
            
            // Mettre √† jour le statut
            order.status = newStatus;
            
            // Si la commande est marqu√©e comme livr√©e, enregistrer la date et verrouiller
            if (newStatus === 'delivered') {
                order.deliveryDate = new Date().toISOString();
                order.deliveryLocked = true; // Verrouiller la modification
                
                // Mettre √† jour les stocks
                updateStockAfterDelivery(order);
            }
            
            // Sauvegarder les modifications
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Mettre √† jour l'affichage
            updateStats();
            displayOrders();
            
            // Rafra√Æchir le modal si ouvert
            const modal = document.getElementById('orderModal');
            if (modal.style.display === 'flex') {
                viewOrder(index);
            }
            
            // Afficher une notification
            showNotification(`üìã Statut mis √† jour: ${getStatusText(newStatus)}`, 'success');
            
            // V√©rifier les notifications
            checkNotifications();
        }

        // Confirmer la livraison (fonction sp√©cifique)
        function confirmDelivery(index) {
            updateOrderStatus(index, 'delivered');
        }

        // Mettre √† jour les stocks apr√®s livraison
        function updateStockAfterDelivery(order) {
            if (order.items) {
                let stockUpdated = false;
                
                order.items.forEach(item => {
                    const productIndex = products.findIndex(p => 
                        p.id === item.productId || 
                        p.name === item.name ||
                        (item.name && p.name.includes(item.name))
                    );
                    
                    if (productIndex !== -1) {
                        const quantity = item.quantity || 1;
                        if (products[productIndex].stock !== undefined) {
                            products[productIndex].stock = Math.max(0, products[productIndex].stock - quantity);
                            products[productIndex].sold = (products[productIndex].sold || 0) + quantity;
                            stockUpdated = true;
                        }
                    }
                });
                
                if (stockUpdated) {
                    localStorage.setItem('adminProducts', JSON.stringify(products));
                    console.log('Stocks mis √† jour apr√®s livraison');
                }
            }
        }

        // Exporter les donn√©es
        function exportData() {
            const data = {
                products: products,
                orders: orders.filter(order => order.status !== 'panier'),
                exportDate: new Date().toISOString(),
                stats: {
                    totalProducts: products.length,
                    totalOrders: orders.filter(o => o.status !== 'panier').length,
                    totalRevenue: document.getElementById('totalRevenue').textContent
                }
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `export-foot-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('üíæ Donn√©es export√©es avec succ√®s !', 'success');
        }

        // Effacer toutes les donn√©es
        function clearAllData() {
            if (confirm('‚ö†Ô∏è ATTENTION: Cette action effacera TOUTES les donn√©es. √ätes-vous ABSOLUMENT s√ªr ?')) {
                localStorage.removeItem('adminProducts');
                localStorage.removeItem('orders');
                localStorage.removeItem('adminNotifications');
                
                products = [];
                orders = [];
                notifications = {};
                
                updateStats();
                displayProducts();
                displayOrders();
                updateSyncStatus();
                
                showNotification('üóëÔ∏è Toutes les donn√©es ont √©t√© effac√©es', 'success');
            }
        }

        // Configuration des √©v√©nements
        function setupEventListeners() {
            // Recherche produits
            document.getElementById('productSearch').addEventListener('input', function(e) {
                displayProducts(e.target.value);
            });

            // Recherche commandes
            document.getElementById('orderSearch').addEventListener('input', function(e) {
                displayOrders(e.target.value);
            });

            // Tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.dataset.tab + '-tab';
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Navigation admin
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.dataset.tab + '-tab';
                    
                    document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('active'));
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.querySelector(`.tab-btn[data-tab="${this.dataset.tab}"]`).classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Fermer les modals
            document.getElementById('modalClose').addEventListener('click', function() {
                document.getElementById('orderModal').style.display = 'none';
            });

            document.getElementById('productModalClose').addEventListener('click', function() {
                document.getElementById('productModal').style.display = 'none';
            });

            // Fermer les modals en cliquant √† l'ext√©rieur
            window.addEventListener('click', function(e) {
                if (e.target.id === 'orderModal') {
                    document.getElementById('orderModal').style.display = 'none';
                }
                if (e.target.id === 'productModal') {
                    document.getElementById('productModal').style.display = 'none';
                }
            });

            // D√©connexion
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Se d√©connecter ?')) {
                    localStorage.removeItem('adminLoggedIn');
                    window.location.href = 'index.html';
                }
            });

            // Synchronisation automatique toutes les 30 secondes
            setInterval(() => {
                syncOrdersFromStorage();
                checkNotifications();
            }, 30000);
            
            // Animation des ballons
            const balloons = document.querySelectorAll('.balloon-effect');
            balloons.forEach((balloon, i) => {
                balloon.style.animationDelay = `${i * 5}s`;
            });
        }
    </script>
</body>
</html>